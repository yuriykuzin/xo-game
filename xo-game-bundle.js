!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){!function(){"use strict";function t(){var t,e,n,s,o=document.createDocumentFragment(),a=!1;if(M&&localStorage.length>=8&&(a=r()),u()){b.textContent="";for(var d=0;d<X.sizeY;d++){e=document.createElement("div"),e.className="field__row";for(var h=0;h<X.sizeX;h++)t=document.createElement("div"),t.className="cell empty",t.id="cell"+h+"_"+d,e.appendChild(t);o.appendChild(e)}}else{s=90/Math.max(X.sizeX,X.sizeY)-140/Math.min(document.body.clientWidth,document.body.clientHeight),b.textContent=".cell {width: "+s+"vmin; height: "+s+"vmin; font-size: "+s+"vmin;}";for(var d=0;d<X.sizeY;d++){e=document.createElement("div"),e.className="field__row";for(var h=0;h<X.sizeX;h++)t=document.createElement("div"),t.className="cell empty custom-cell",t.id="cell"+h+"_"+d,t.style.maxWidth=s+"vmin",e.appendChild(t);o.appendChild(e)}}L.appendChild(o),a?(n=l(),i("Your game settings and turns were loaded from the local storage")):(X.isGameActive=!0,c(),"random"===X.whoGoesFirst?X.isNextTurnByX=!!Math.round(Math.random()):X.isNextTurnByX="x"===X.whoGoesFirst,localStorage.removeItem("turns")),_.innerHTML=X.isNextTurnByX?"x":"o",w.start(X,n),M=!1,k=!1,m()}function e(t){X.sizeX!==+document.forms[0].elements.sizeX.value||X.sizeY!==+document.forms[0].elements.sizeY.value||X.winCondition!==+document.forms[0].elements.winCondition.value?C&&(C=!1,document.querySelector("#continueBtn").classList.add("btn-disabled")):C||(C=!0,document.querySelector("#continueBtn").classList.remove("btn-disabled"))}function i(t){var e=document.getElementById("myModal"),n=function(t){e.classList.add("modal__animation-hide"),e.classList.remove("modal__animation-show"),window.removeEventListener("click",n),window.removeEventListener("keydown",n),setTimeout(function(){e.style.zIndex=-1},1500)};e.style.zIndex=2,x.classList.remove("boardgame__start-animation"),e.querySelector(".modal__content__message").innerHTML=t,e.classList.add("modal__animation-show"),e.classList.remove("modal__animation-hide"),window.addEventListener("click",n),window.addEventListener("keydown",n)}function s(t){return t.preventDefault(),("newGameBtn"===t.target.id||"continueBtn"===t.target.id&&C)&&(o(),document.removeEventListener("click",v,!1),"newGameBtn"===t.target.id?setTimeout(function(){f(!1)},400):m()),!1}function o(t){x.classList.remove("boardgame__start-animation"),T.classList.contains("options__is-shown")?(t&&"options-button"===t.target.className||(X.isHumanX="true"===document.forms[0].elements.isHumanX.value,X.isHumanO="true"===document.forms[0].elements.isHumanO.value,X.whoGoesFirst=document.forms[0].elements.whoGoesFirst.value,X.sizeX=+document.forms[0].elements.sizeX.value,X.sizeY=+document.forms[0].elements.sizeY.value,X.winCondition=+document.forms[0].elements.winCondition.value,c()),T.classList.add("options__animation-hide"),setTimeout(function(){T.classList.remove("options__is-shown"),T.classList.remove("options__animation-hide")},1400)):(document.forms[0].elements.isHumanX.value=X.isHumanX,document.forms[0].elements.isHumanO.value=X.isHumanO,document.forms[0].elements.whoGoesFirst.value=X.whoGoesFirst,document.forms[0].elements.sizeX.value=X.sizeX,document.forms[0].elements.sizeY.value=X.sizeY,document.forms[0].elements.winCondition.value=X.winCondition,C=!0,document.querySelector("#continueBtn").classList.remove("btn-disabled"),T.classList.add("options__animation-show"),setTimeout(function(){T.classList.add("options__is-shown"),T.classList.remove("options__animation-show")},1400))}function a(){var t,e=document.querySelectorAll(".cell");if(T.classList.contains("options__is-shown"))E.classList.contains("mega-swing")||(E.classList.add("mega-swing"),setTimeout(function(){E.classList.remove("mega-swing")},2100));else for(var n=0;n<e.length;n++)e[n].classList.contains("mega-swing")||(t=800*Math.random(),function(t,e){setTimeout(function(){t.classList.add("mega-swing")},e),setTimeout(function(){t.classList.remove("mega-swing")},e+2100)}(e[n],t))}function r(){for(var t in X){if(void 0===localStorage[t])return localStorage.clear(),!1;X[t]="whoGoesFirst"===t?localStorage[t]:JSON.parse(localStorage[t])}return!0}function l(){var t,e,n,i,s={};if(localStorage.turns){if(t=localStorage.turns.split("/"),t.length<1)return!1;for(var o=t.length;o--;){if(e=t[o].split("_"),3!==e.length)return!1;s[e[0]]={},s[e[0]].isByFirstPlayer="1"===e[1],s[e[0]].values=e[2].split(","),s[e[0]].values.forEach(function(t,e,n){n[e]=+t}),n=document.querySelector("#cell"+e[0].slice(0,e[0].indexOf(";"))+"_"+e[0].slice(e[0].indexOf(";")+1)),i="0"===e[1]?"o":"x",n.classList.add(i+"-cell"),n.innerHTML=i}}return s}function c(){for(var t in X)localStorage[t]=X[t]}function u(){return 3===X.sizeX&&3===X.sizeY&&3===X.winCondition}function d(t){t.preventDefault();var e=document.elementFromPoint(t.clientX,t.clientY);!k&&X.isGameActive&&e.classList.contains("empty")&&(k=!0,h()?m():m(e))}function m(t){if(void 0!==t||h()){var e;if(k=!0,void 0===t?(e=w.makeComputedTurn(),t=document.querySelector("#cell"+e.x+"_"+e.y)):e=w.makeTurn(+t.id.slice(4,t.id.indexOf("_")),+t.id.slice(t.id.indexOf("_")+1)),t.classList.remove("empty"),X.isNextTurnByX?(t.classList.add("x-cell"),t.innerHTML="x"):(t.classList.add("o-cell"),t.innerHTML="o"),t.classList.add("start-swing"),setTimeout(function(){t.classList.remove("start-swing")},2e3),"victory"===e.status)for(var n=0;n<e.winArray.length;n++)document.querySelector("#cell"+e.winArray[n].join("_")).classList.add("win-combo");else"draw"===e.status&&_.classList.add("field__background-fadeout");if("draw"===e.status||"victory"===e.status){for(var i=document.querySelectorAll(".cell:not(.win-combo)"),n=0;n<i.length;n++)i[n].classList.add("cell-fadeout");X.isGameActive=!1,localStorage.removeItem("turns"),setTimeout(function(){document.addEventListener("click",v,!1)},1500)}else X.isNextTurnByX=!X.isNextTurnByX,p(),localStorage.turns?localStorage.turns+="/":localStorage.turns="",localStorage.turns=w.turnsToString(),localStorage.isNextTurnByX=X.isNextTurnByX;X.isGameActive&&h()?setTimeout(m,600*Math.random()+1500):k=!1}}function h(){return X.isNextTurnByX&&!X.isHumanX||!X.isNextTurnByX&&!X.isHumanO}function f(e){for(e&&(x.classList.add("boardgame__start-animation"),setTimeout(function(){x.classList.remove("boardgame__start-animation")},1200));L.firstChild;)L.removeChild(L.firstChild);t()}function v(t){"options-button"===document.elementFromPoint(t.clientX,t.clientY).className||T.classList.contains("options__is-shown")||(document.removeEventListener("click",v,!1),f(!0))}function p(){_.classList.add("field__background-fadeout"),setTimeout(function(){_.innerHTML=X.isNextTurnByX?"x":"o",_.classList.remove("field__background-fadeout")},800)}var y=n(1),g=n(2),w=new g;n(3);var _,L,x,T,S,E,b,X={isHumanX:!1,isHumanO:!0,isGameActive:!1,isNextTurnByX:!0,whoGoesFirst:"x",sizeX:3,sizeY:3,winCondition:3},C=!0,M=!0,k=!1;window.onload=function(){b=document.createElement("style"),b.id="s_myCellStyle",document.head.appendChild(b),b=document.getElementById("s_myCellStyle"),x=document.querySelector(".board__game"),L=document.querySelector(".field"),T=document.querySelector(".board"),E=document.querySelector(".options-frame"),_=document.querySelector(".field__background"),S=document.querySelector(".options-button"),setTimeout(function(){x.classList.remove("boardgame__start-animation")},1200),L.addEventListener("click",d,!1),E.querySelector(".options-form").addEventListener("click",s,!1),E.querySelector(".options-form").addEventListener("change",e,!1),S.addEventListener("click",o,!1),L.addEventListener("click",d,!1);var n=new y({threshold:3,timeout:1e3});n.start(),window.addEventListener("shake",a,!1),t()}}()},function(t,e,n){var i;!function(s,o){i=function(){return o(s,s.document)}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(n){if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&(this.options[i]=n[i]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),this.hasDeviceMotion&&t.addEventListener("devicemotion",this,!1)},n.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},n.prototype.devicemotion=function(e){var n,i,s=e.accelerationIncludingGravity,o=0,a=0,r=0;return null===this.lastX&&null===this.lastY&&null===this.lastZ?(this.lastX=s.x,this.lastY=s.y,void(this.lastZ=s.z)):(o=Math.abs(this.lastX-s.x),a=Math.abs(this.lastY-s.y),r=Math.abs(this.lastZ-s.z),(o>this.options.threshold&&a>this.options.threshold||o>this.options.threshold&&r>this.options.threshold||a>this.options.threshold&&r>this.options.threshold)&&(n=new Date,i=n.getTime()-this.lastTime.getTime(),i>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date)),this.lastX=s.x,this.lastY=s.y,void(this.lastZ=s.z))},n.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},n})},function(t,e){function n(){function t(t,e,n,i){if(void 0===i&&(i=l),!(""+t+";"+e in r))return 0;var s=r[""+t+";"+e];return s.isByFirstPlayer===i?+s.values[n]:0}function e(e,s,o,a){for(var c=[],u=0;u<=3;u++)c[u]=1+t(e+i[u][0],s+i[u][1],u,o)+t(e+i[u][2],s+i[u][3],u,o),a&&c[u]>1&&(n(e,s,c[u],u,i[u].slice(0,2)),n(e,s,c[u],u,i[u].slice(2)));return a&&(r[e+";"+s]={isByFirstPlayer:l,values:c}),c}function n(t,e,i,u,d){var m=t+d[0],h=e+d[1];return!(m<0||h<0||m>=s||h>=o)&&""+m+";"+h in r&&(r[""+m+";"+h].isByFirstPlayer===l&&(r[""+m+";"+h].values[u]=i,i>=a&&c.push([m,h]),n(m,h,i,u,d),!0))}var i=[[-1,-1,1,1],[0,-1,0,1],[1,-1,-1,1],[-1,0,1,0]],s=3,o=3,a=3,r={},l=!0,c=[],u=!1;this.start=function(t,e){t&&(s=t.sizeX,o=t.sizeY,a=t.winCondition,l=t.isNextTurnByX),r=e?e:{},c=[],u=!1},this.turnsToString=function(){var t,e=[];for(var n in r)t=[],t.push(n),t.push(+r[n].isByFirstPlayer),t.push(r[n].values.join(",")),e.push(t.join("_"));return e.join("/")},this.makeTurn=function(t,n){var i={x:t,y:n};return t<0||n<0||t>=s||n>=o||""+t+";"+n in r?(i.status="error",i):(i.values=e(t,n,l,!0),Math.max.apply(null,i.values)>=a&&(c.push([t,n]),u=!0),u?(i.status="victory",i.winArray=c,i.winnerIsFirst=l,i):Object.keys(r).length===s*o?(i.status="draw",i):(l=!l,i.status="ok",i))},this.makeComputedTurn=function(){var t,n,c,u={x:Math.round(Math.random()*(s-1)),y:Math.round(Math.random()*(o-1)),score:2},d={};for(var m in r)for(var h=0;h<4;h++)for(var f=0;f<4;f+=2)if(t={},t.x=i[h][f]+parseInt(m.split(";")[0],10),t.y=i[h][f+1]+parseInt(m.split(";")[1],10),!(t.x<0||t.y<0||t.x>=s||t.y>=o||""+t.x+";"+t.y in r||""+t.x+";"+t.y in d)){if(t.values=e(t.x,t.y,l,!1),Math.max.apply(null,t.values)>=a)return this.makeTurn(t.x,t.y);n=e(t.x,t.y,!l,!1),Math.max.apply(null,n)>=a?t.score=1e4:(c=function(t,e){return t+e*e},t.score=t.values.reduce(c,0)+n.reduce(c,0)),d[""+t.x+";"+t.y]=t.score,t.score>u.score&&(u=t)}return this.makeTurn(u.x,u.y)}}t.exports=n},function(t,e){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},c=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;i<s;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",""+this)}},u=c[n]=[],d=function(){return new c(this)};if(r[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",l(this,t)!==-1},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",l(this,t)===-1&&(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,o=!1;do for(t=n[i]+"",e=l(this,t);e!==-1;)this.splice(e,1),o=!0,e=l(this,t);while(++i<s);o&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.toString=function(){return this.join(" ")},s.defineProperty){var m={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,m)}catch(h){h.number===-2146823252&&(m.enumerable=!1,s.defineProperty(i,e,m))}}else s[n].__defineGetter__&&i.__defineGetter__(e,d)}}(window.self))}]);